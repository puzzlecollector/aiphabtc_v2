{% extends "base.html" %}
{% load static %}
{% load aiphabtc_filter %}
{% load humanize %}

{% block head %}
{{ block.super }}
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<style>
    a {
        text-decoration: none; /* Remove underline */
        color: #007bff; /* Bootstrap default blue color for links */
    }
    .news-table {
        width: 100%;
        border-collapse: collapse;
        position: relative; /* Necessary for tooltips */
    }
    .news-row {
        display: table-row;
    }
    .news-cell {
        display: table-cell;
        padding: 10px;
        border-bottom: 1px solid #ddd;
        position: relative; /* for tooltip positioning */
        text-align: center; /* Center text within the cell */
    }
    .title-cell {
        font-weight: bold;
        color: #333;
        cursor: help; /* indicates that a tooltip is available */
    }
    .datetime-cell {
        color: #666;
        font-size: 0.9em;
    }

    /* Tooltip styles */



    .tooltip-custom {
        position: absolute;
        background-color: #333;
        color: #fff;
        padding: 5px;
        border-radius: 3px;
        z-index: 1000;
        max-width: 600px;
        display: none;
        word-wrap: break-word;
    }



    .title-cell:hover .tooltip-custom {
        display: block;
    }

    /* Ensure parent containers don't hide overflow */
    .card {
        overflow: visible;
    }

    .table-responsive {
        overflow: visible !important;
    }

    .title-cell:hover::after {
        opacity: 1;
        visibility: visible;
    }
    .sentiment-scores {
        margin: 20px 0;
    }

    .sentiment-score {
        background-color: #f2f2f2;
        border-radius: 5px;
        overflow: hidden;
        position: relative;
        margin-bottom: 10px;
    }

    .sentiment-bar {
        height: 20px;
        background-color: #4caf50;
        transition: width 0.3s ease;
    }

    .sentiment-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-weight: bold;
    }

    .table-responsive {
        overflow-x: auto;
    }

    .footer {
        text-align: center;
        padding: 20px;
        background-color: #f2f2f2;
        color: #333;
        font-size: 0.9rem;
        border-top: 1px solid #ddd;
        margin-top: 20px;
    }

    .voting-container {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 300px; /* Adjust based on your needs */
    }

    .voting-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0,0,0,.1);
        margin-top: 20px;
    }

    .voting-container form {
        width: 100%;
    }

    .voting-container .form-check {
        margin: 10px 0;
    }

    .voting-container .form-check-input {
        cursor: pointer;
    }

    .voting-container .form-check-label {
        cursor: pointer;
        font-weight: 500;
    }

    .voting-container button[type="submit"] {
        width: 100%;
        margin-top: 20px;
    }

    .tradingview-widgets {
        display: flex;
        justify-content: space-between;
    }

    .tradingview-widget-container {
        margin: 0 auto;
        width: 100%; /* Responsive width */
    }

    .dominance-container {
      padding: 10px;
      border: 1px solid #ddd; /* Adds a subtle border */
      border-radius: 8px; /* Rounded corners for better aesthetics */
      box-shadow: 0 4px 6px rgba(0,0,0,0.1); /* Soft shadow for depth */
    }

    .investment-calendar-container {
        text-align: center;
        padding: 10px;
        background-color: #fff; /* Light background for the container */
        border: 1px solid #ccc; /* Subtle border */
        border-radius: 10px; /* Rounded corners */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Soft shadow for depth */
        margin: 20px auto;
        width: 100%; /* Full width to accommodate smaller screens */
        max-width: 999px; /* Maximum width to maintain aesthetics */
    }

    .investment-calendar-container iframe {
        display: block;
        margin: 0 auto;
        width: 100%; /* Responsive width */
        height: 450px; /* Height adjustment for better visibility */
        border: none; /* Removing the default border */
    }

    .poweredBy {
        font-size: 0.75rem; /* Smaller font size for the attribution */
        color: #666; /* Subdued color for less attention */
        margin-top: 10px;
        text-align: center;
    }

    .advertisement-container {
        text-align: center; /* Center the advertisement */
        margin: 20px 0; /* Add some space around the ad */
        box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Optional: Adds a subtle shadow around the ad for depth */
        border-radius: 8px; /* Optional: Rounds the corners of the ad container */
        overflow: hidden; /* Ensures the border-radius clips the image if needed */
    }

    .advertisement-image {
        width: 100%; /* Ensures the image fills the container */
        transition: transform 0.3s ease; /* Smoothly scales the image on hover */
    }

    .advertisement-container:hover .advertisement-image {
        transform: scale(1.05); /* Slightly enlarges the image on hover for a subtle interactive effect */
    }

    .ad-label {
        display: block;
        text-align: center;
        margin-bottom: 8px;
        font-size: 0.8rem;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .footer {
        text-align: left; /* Center-align text */
        padding: 20px; /* Add some padding */
        background-color: #f2f2f2; /* Light grey background */
        color: #333; /* Darker text color for contrast */
        font-size: 0.9rem; /* Adjust the font size */
        border-top: 1px solid #ddd; /* Add a top border line */
        margin-top: 20px; /* Add some space above the footer */
    }

    .column-divider:not(:last-child) {
        border-right: 2px solid #dee2e6;
    }

    .list-group-item-announcement {
        background-color: #e6f4ea; /* Light green background */
        border-left: 3px solid #28a745; /* Darker green line on the left side */
    }

    .btn-group .btn {
        margin-right: 5px; /* Adds space between buttons */

    }

    .btn-group .btn:hover {
        background-color: #0056b3; /* Darker shade on hover for better UI interaction */
    }

    .dominance-chart {
        height: 100%; /* Ensures the trading view container fills its parent */
        padding: 0;
        margin: 0 auto; /* Centers the chart if necessary */
        width: 100%; /* Ensures full width */
    }

    .chart-container {
        width: 100%; /* Full width */
        height: 400px; /* Adjust height dynamically based on viewport */
        transition: height 0.5s ease-in-out; /* Smooth transition for resizing, optional */
    }

    .additional-news {
        margin-top: 20px;
        padding: 15px;
        background-color: #f8f9fa; /* Light gray background to distinguish this section */
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1); /* Soft shadow for depth */
    }

    .additional-news-heading {
        color: #333; /* Dark grey for text */
        font-size: 18px;
        margin-bottom: 10px; /* Space between heading and list */
    }

    .news-links li {
        margin-bottom: 5px; /* Space between items for better readability */
        font-size: 14px; /* Suitable font size for details */
        line-height: 1.6; /* Increased line height for readability */
        color: #555; /* Slightly lighter text for easy reading */
    }

    .news-links strong {
        color: #007bff; /* Bootstrap primary blue for emphasis */
    }

    @media (max-width: 999px) {
        .container, .voting-container, .advertisement-container {
            padding: 10px;
            margin-top: 10px;
        }

        .investment-calendar-container {
            text-align: center;
            padding: 10px;
        }

        .investment-calendar-container ifrmae {
            width:100%;
            height:300px;
            display:block;
            margin: 0 auto;
        }

        .poweredBy {
            text-align: center;
            font-size: 0.75rem;
            maring-top: 10px;
        }


        .chart-container {
            height: auto; /* More flexible on mobile devices */
            padding-bottom: 20px; /* Extra bottom padding on smaller screens */
        }

        .advertisement-container {
            width: 50%; /* Each advertisement takes up half the width */
            display: inline-block; /* Inline-block for side-by-side layout */
            margin: 0 0 10px 0; /* Adjust margins as needed */
            margin-top: 30px;
            margin-bottom: 20px;
            padding: 0; /* Remove padding if necessary */
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
        }

        .news-cell {
            display: block; /* Stacks the news cells vertically */
            padding: 5px 0; /* Reduce padding for smaller screens */
        }

        .title-cell, .datetime-cell {
            text-align: left; /* Aligns text to the left for consistency */
            padding: 10px 5px; /* Adjust padding for smaller spaces */
        }

        .tradingview-widget-container {
            margin: 0; /* Remove margins */
            height: auto; /* Adjust height automatically */
            margin-bottom: 35px;
        }

        .tradingview-widget-container__widget {
            width: 100%; /* Full width */
            height: auto; /* Auto height for flexibility */
        }

        .sentiment-scores, .investment-calendar-container, .voting-container {
            margin-top: 0; /* Reduce margin to save space */
        }

        .btn-group {
            display: block; /* Stack buttons vertically */
            width: 100%;
        }

        .btn-group .btn {
            margin-bottom: 5px; /* Add space between stacked buttons */
        }

        .footer {
            padding: 10px; /* Reduce padding */
        }

        .dominance-container {
            padding: 5px;
            margin: 5px;
        }
    }

    .list-group-item-popular {
        background-color: #fff5f5; /* Light red background */
        border-left: 3px solid red; /* Red line on the left side */
    }

</style>
{% endblock %}

{% block content %}
<div class="container mt-5">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} mt-4" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    <div class="row">
        <div class="col-lg-12">
            <h3>DASHBOARD</h3>
            <hr>
            <!-- Telegram Analyst Channel Section -->
            <div class="d-flex align-items-center mb-3">
                <h6 class="me-3 mb-0">🚀 AIPHABTC Free Telegram Analyst Channel:</h6>
                <div>
                    <a href="https://t.me/aiphabtc_analyst_eng" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'telegram_logo.jpg' %}" alt="Telegram English" style="height:20px; margin-right: 5px;">
                        <span>ENG Analyst Channel</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://t.me/aiphabtc_analyst_kr" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'telegram_logo.jpg' %}" alt="Telegram Korean" style="height:20px; margin-right: 5px;">
                        <span>KOR Analyst Channel</span>
                    </a>
                </div>
            </div>

            <!-- Invites & Referrals Section -->
            <div class="d-flex align-items-center mb-3">
                <h6 class="me-3 mb-0">🎁 Invites & Referrals:</h6>
                <div>
                    <a href="https://warpcast.com/~/invite-page/667040?id=b6c37510" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'warpcast.jpeg' %}" alt="Warpcast" style="height:20px; margin-right: 5px;">
                        <span>Warpcast</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://www.mexc.com/register?inviteCode=128uEf" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'mexc.png' %}" alt="MEXC" style="height:20px; margin-right: 5px;">
                        <span>MEXC</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://www.bitget.com/en-GB/register?inviteCode=FPKX1RFE" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'bitget.jpeg' %}" alt="Bitget" style="height:20px; margin-right: 5px;">
                        <span>Bitget</span>
                    </a>
                </div>
            </div>

            <!-- Social Profiles Section -->
            <div class="d-flex align-items-center mb-3">
                <h6 class="me-3 mb-0">📧 Social Profiles:</h6>
                <div>
                    <a href="https://www.youtube.com/@aiphabtc11235" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'youtube.png' %}" alt="Youtube" style="height:20px; margin-right: 5px;">
                        <span>Youtube</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://x.com/aiphabtc11235" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'twitter.png' %}" alt="Twitter" style="height:20px; margin-right: 5px;">
                        <span>X</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://www.instagram.com/aipha.btc" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'ig_logo.png' %}" alt="Instagram" style="height:20px; margin-right: 5px;">
                        <span>IG</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://github.com/aiphabtc11235" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'github_logo.png' %}" alt="github" style="height:20px; margin-right: 5px;">
                        <span>Github</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://blog.naver.com/aiphabtc11235" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'naver.png' %}" alt="naver-blog" style="height:20px; margin-right: 5px;">
                        <span>Naver Blog</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="mailto:aiphabtcbusiness11235@gmail.com" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'email_logo.png' %}" alt="Email" style="height:20px; margin-right: 5px;">
                        <span>Email Us</span>
                    </a>
                </div>
            </div>

            <!-- Publications Section -->
            <div class="d-flex align-items-center mb-3">
                <h6 class="me-3 mb-0">👨‍🎓 Publications:</h6>
                <div>
                    <a href="https://ieeexplore.ieee.org/document/10014986" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'IEEE.png' %}" alt="IEEE" style="height:20px; margin-right: 5px;">
                        <span>CBITS</span>
                    </a>
                    <span class="mx-2">|</span>
                    <a href="https://arxiv.org/pdf/2308.08558" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                        <img src="{% static 'kdd.png' %}" alt="KDD" style="height:20px; margin-right: 5px;">
                        <span>BIRP (KDD)</span>
                    </a>
                </div>
            </div>

            <!-- Pumpfun Section -->
            <div class="d-flex align-items-center mb-3">
                <h6 class="me-3 mb-0"><img src="{% static 'pumpfun.png' %}" alt="pumpfun" style="height:20px; margin-right: 5px;"><a href="https://pump.fun/Ft3yQY49wcpAGj2kAJnkyhDBYmekKeFLhmg81vhHpump" target="_blank" class="d-inline-flex align-items-center text-decoration-none">aiphabtc</a></h6>
            </div>

            <hr style="height: 5px; background-color: green;">
                <div class="search-container mb-4">
                    <div class="d-flex justify-content-end">
                        <form action="{% url 'aiphabtc:search_results' %}" method="get" class="row gx-2" style="max-width: 600px; width: 100%;">
                            <div class="col">
                                <input class="form-control form-control-md" type="search" placeholder="What are you looking for? 😊" aria-label="Search" name="q" style="height: 38px;">
                            </div>
                            <div class="col-auto">
                                <button class="btn btn-outline-success" type="submit" style="height: 38px;">Search</button>
                            </div>
                        </form>
                    </div>
                </div>



                <div class="row">
                    {% for board, posts in board_posts.items %}
                        {% if board.name != 'blockchain' and board.name != 'economics' and board.name != 'general_qa' and board.name != 'creator_reviews' and board.name != 'trading' and board.name != 'AI' %}
                        <div class="col-12 col-md-6 mb-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        {% if board.name == 'free_board' %}
                                        <a href="{% url 'aiphabtc:board_filtered' 'free_board' %}">Free Board</a>
                                        <span class="text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="Feel free to post on any topic."><i class="fas fa-info-circle"></i></span>
                                        {% elif board.name == 'tutorials' %}
                                        <a href="{% url 'aiphabtc:board_filtered' 'tutorials' %}">Tutorials</a>
                                        <span class="text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="Share how AI, machine learning, and deep learning can be applied to crypto trading. Also share educational posts about blockchain and financial knowledge useful for understanding the crypto market."><i class="fas fa-info-circle"></i></span>
                                        {% elif board.name == 'announcements' %}
                                        <a href="{% url 'aiphabtc:board_filtered' 'announcements' %}">Announcements</a>
                                        <span class="text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="We will post announcements about our platform and token."><i class="fas fa-info-circle"></i></span>
                                        {% elif board.name == 'perceptive_board' %}
                                        <a href="{% url 'aiphabtc:board_filtered' 'perceptive_board' %}">Crypto Predictions</a>
                                        <span class="text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="Feel free to share your perspectives on Bitcoin and altcoins."><i class="fas fa-info-circle"></i></span>
                                        {% else %}
                                        {{ board.name }}
                                        {% endif %}
                                    </h5>
                                </div>
                                <ul class="list-group list-group-flush">
                                    {% for post in posts %}
                                    <li class="list-group-item d-flex justify-content-between">
                                        <a href="{% url 'aiphabtc:detail' post.id %}">{{ post.subject }}</a>
                                        <span class="badge bg-info" style="height: 1.5rem; width: auto; display: inline-block;">{{ post.create_date|date:"Y-m-d" }}</span>
                                    </li>
                                    {% empty %}
                                    <li class="list-group-item text-muted">No posts yet</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>

            <hr style="height: 5px; background-color: green;">


            <div class="row">
                <div class="col-lg-6 column-divider">

                    <div class="dropdown mb-3">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="chartDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            Select Market Charts
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="chartDropdown">
                            <li><a class="dropdown-item chart-option" href="#" data-chart="btc-usdt">BTC-USDT</a></li>
                            <li><a class="dropdown-item chart-option" href="#" data-chart="btc-krw">BTC-KRW</a></li>
                            <li><a class="dropdown-item chart-option" href="#" data-chart="eth-usdt">ETH-USDT</a></li>
                            <li><a class="dropdown-item chart-option" href="#" data-chart="eth-krw">ETH-KRW</a></li>
                            <li><a class="dropdown-item chart-option" href="#" data-chart="sol-usdt">SOL-USDT</a></li>
                            <li><a class="dropdown-item chart-option" href="#" data-chart="sol-krw">SOL-KRW</a></li>
                            <li><a class="dropdown-item chart-option" href="#" data-chart="usdt-krw">USDT-KRW</a></li>
                        </ul>
                    </div>

                    <!-- BTC-USDT Chart -->
                    <div id="btc-usdt" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">BTC-USDT Chart</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": true,
                                "symbol": "COINBASE:BTCUSDT",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "allow_symbol_change": true,
                                "calendar": false,
                                "studies": ["STD;RSI"]
                            }
                            </script>
                        </div>
                    </div>

                    <!-- BTC-KRW Chart -->
                    <div id="btc-krw" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">BTC-KRW Chart</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "UPBIT:BTCKRW",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "toolbar_bg": "#f1f3f6",
                                "enable_publishing": false,
                                "allow_symbol_change": true,
                                "studies": ["STD;RSI"]
                            }
                            </script>
                        </div>
                    </div>

                    <!-- ETH-USDT Chart -->
                    <div id="eth-usdt" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">ETH-USDT Chart</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": true,
                                "symbol": "COINBASE:ETHUSDT",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "allow_symbol_change": true,
                                "calendar": false,
                                "studies": ["STD;RSI"]
                            }
                            </script>
                        </div>
                    </div>


                    <!-- ETH-KRW Chart -->
                    <div id="eth-krw" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">ETH-KRW Chart</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "UPBIT:ETHKRW",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "toolbar_bg": "#f1f3f6",
                                "enable_publishing": false,
                                "allow_symbol_change": true,
                                "studies": ["STD;RSI"]
                            }
                            </script>
                        </div>
                    </div>

                    <!-- SOL-USDT Chart -->
                    <div id="sol-usdt" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">SOL-USDT Chart</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": true,
                                "symbol": "COINBASE:SOLUSDT",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "allow_symbol_change": true,
                                "calendar": false,
                                "studies": ["STD;RSI"]
                            }
                            </script>
                        </div>
                    </div>

                    <!-- SOL-KRW Chart -->
                    <div id="sol-krw" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">SOL-KRW Chart</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "UPBIT:SOLKRW",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "toolbar_bg": "#f1f3f6",
                                "enable_publishing": false,
                                "allow_symbol_change": true,
                                "studies": ["STD;RSI"]
                            }
                            </script>
                        </div>
                    </div>


                    <!-- USDT-KRW Chart -->
                    <div id="usdt-krw" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">USDT-KRW Chart</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "UPBIT:USDTKRW",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "toolbar_bg": "#f1f3f6",
                                "enable_publishing": false,
                                "allow_symbol_change": true,
                                "studies": ["STD;RSI"]
                            }
                            </script>
                        </div>
                    </div>

                </div>
                <div class="col-lg-6">
                    <!-- Dropdown Menu for Chart Selection -->
                    <div class="dropdown mb-3">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dominanceDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            Select Other Useful Charts
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dominanceDropdown">
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="btc-dominance">BTC Dominance</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="eth-dominance">ETH Dominance</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="total3-dominance">Total 3 Dominance</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="total2-dominance">Total 2 Dominance</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="gold">Gold</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="silver">Silver</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="NAS100">NASDAQ</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="IWM">Russell 2000</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="USDX">U.S. Dollar Index</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="sp500">S&P500</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="BTCLongs">BTCUSD Longs</a></li>
                            <li><a class="dropdown-item dominance-option" href="#" data-chart="BTCShorts">BTCUSD Shorts</a></li>
                        </ul>
                    </div>

                    <!-- BTC Dominance Widget -->
                    <div id="btc-dominance" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">BTC Dominance</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "CRYPTOCAP:BTC.D",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "allow_symbol_change": true,
                                "calendar": false
                            }
                            </script>
                        </div>
                    </div>

                    <!-- ETH Dominance Widget -->
                    <div id="eth-dominance" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">ETH Dominance</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "CRYPTOCAP:ETH.D",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "allow_symbol_change": true,
                                "calendar": false
                            }
                            </script>
                        </div>
                    </div>

                    <!-- Total 3 Dominance Widget -->
                    <div id="total3-dominance" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">Total 3 Dominance</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "CRYPTOCAP:TOTAL3",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "allow_symbol_change": true,
                                "calendar": false
                            }
                            </script>
                        </div>
                    </div>

                    <!-- Total 2 Dominance Widget -->
                    <div id="total2-dominance" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">Total 2 Dominance</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                            {
                                "autosize": false,
                                "symbol": "CRYPTOCAP:TOTAL2",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "allow_symbol_change": true,
                                "calendar": false
                            }
                            </script>
                        </div>
                    </div>

                    <!-- GOLD -->
                    <div id="gold" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">Gold</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "TVC:GOLD",
                                  "interval": "D",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                    <!-- SILVER -->
                    <div id="silver" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">Silver</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "CAPITALCOM:SILVER",
                                  "interval": "D",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                    <!-- NASDAQ -->
                    <div id="NAS100" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">NASDAQ</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "FOREXCOM:NAS100",
                                  "interval": "D",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                    <!-- RUSSELL 2000 -->
                    <div id="IWM" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">RUSSELL 2000</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "AMEX:IWM",
                                  "interval": "D",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                    <!-- USDX -->
                    <div id="USDX" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">U.S. Dollar Index</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "PEPPERSTONE:USDX",
                                  "interval": "D",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                    <!-- S&P500 -->
                    <div id="sp500" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">S&P500</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "FRED:SP500",
                                  "interval": "D",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                    <!-- BTC Longs -->
                    <div id="BTCLongs" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">BTCUSD Longs</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "BITFINEX:BTCUSDLONGS",
                                  "interval": "15",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                    <!-- BTC Shorts -->
                    <div id="BTCShorts" class="tradingview-widget-container" style="display: none;">
                        <h5 class="mb-3">BTCUSD Shorts</h5>
                        <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                              {
                                  "autosize": true,
                                  "symbol": "BITFINEX:BTCUSDSHORTS",
                                  "interval": "15",
                                  "timezone": "Etc/UTC",
                                  "theme": "dark",
                                  "style": "1",
                                  "locale": "en",
                                  "allow_symbol_change": true,
                                  "calendar": false,
                                  "support_host": "https://www.tradingview.com"
                                }
                            </script>
                        </div>
                    </div>

                </div>
            </div>
            <br>

            <hr style="height: 5px; background-color: green;">
            <p>
                <div class="row">
                    <div class="col-lg-6 column-divider">
                        <!-- Dropdown to switch between heatmaps -->
                        <div class="dropdown mb-3">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="heatmapDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                Select Heatmap
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="heatmapDropdown">
                                <li><a class="dropdown-item heatmap-option" href="#" data-heatmap="crypto">Crypto Coins Heatmap</a></li>
                                <li><a class="dropdown-item heatmap-option" href="#" data-heatmap="stocks">Stock Heatmap</a></li>
                                <li><a class="dropdown-item heatmap-option" href="#" data-heatmap="etf">ETF Heatmap</a></li>
                            </ul>
                        </div>

                        <!-- Heatmap Container -->
                        <div id="crypto-heatmap" class="tradingview-widget-container" style="display: block;">
                            <h5 class="mb-3">Crypto Coins Heatmap</h5>
                            <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-crypto-coins-heatmap.js" async>
                                    {
                                        "dataSource": "Crypto",
                                        "blockSize": "market_cap_calc",
                                        "blockColor": "change",
                                        "locale": "en",
                                        "symbolUrl": "",
                                        "colorTheme": "dark",
                                        "hasTopBar": false,
                                        "isDataSetEnabled": false,
                                        "isZoomEnabled": false,
                                        "hasSymbolTooltip": false,
                                        "isMonoSize": false,
                                        "width": "100%",
                                        "height": "100%"
                                    }
                                </script>
                            </div>
                        </div>

                        <div id="stocks-heatmap" class="tradingview-widget-container" style="display: none;">
                            <h5 class="mb-3">Stock Heatmap</h5>
                            <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js" async>
                                    {
                                        "exchanges": [],
                                        "dataSource": "SPX500",
                                        "grouping": "sector",
                                        "blockSize": "market_cap_basic",
                                        "blockColor": "change",
                                        "locale": "en",
                                        "symbolUrl": "",
                                        "colorTheme": "dark",
                                        "hasTopBar": false,
                                        "isDataSetEnabled": false,
                                        "isZoomEnabled": true,
                                        "hasSymbolTooltip": true,
                                        "isMonoSize": false,
                                        "width": "100%",
                                        "height": "100%"
                                    }
                                </script>
                            </div>
                        </div>

                        <div id="etf-heatmap" class="tradingview-widget-container" style="display: none;">
                            <h5 class="mb-3">ETF Heatmap</h5>
                            <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                                 <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-etf-heatmap.js" async>
                                    {
                                          "dataSource": "AllUSEtf",
                                          "blockSize": "aum",
                                          "blockColor": "change",
                                          "grouping": "asset_class",
                                          "locale": "en",
                                          "symbolUrl": "",
                                          "colorTheme": "dark",
                                          "hasTopBar": false,
                                          "isDataSetEnabled": false,
                                          "isZoomEnabled": true,
                                          "hasSymbolTooltip": true,
                                          "isMonoSize": false,
                                          "width": "100%",
                                          "height": "100%"
                                    }
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <!-- Economic Calendar -->
                        <h5 class="mb-3">Important Events Highlight</h5>
                        <div id="economic-calendar" class="investment-calendar-container my-4">
                            <div class="tradingview-widget-container__widget" style="height:400px;width:100%">
                                <iframe src="https://sslecal2.investing.com?borderColor=%2310b316&columns=exc_flags,exc_currency,exc_importance,exc_actual,exc_forecast,exc_previous&features=datepicker,timezone&countries=5,4,72,14,35,37,6,122,11,39&calType=week&timeZone=88&lang=1" width="100%" height="400" frameborder="0" allowtransparency="true" marginwidth="0" marginheight="0"></iframe>
                            </div>
                            <div class="poweredBy" style="font-family: Arial, Helvetica, sans-serif;">
                                <span style="font-size: 11px;color: #333333;text-decoration: none;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </p>

            <hr style="height: 5px; background-color: green;">
            <p>

                <!-- Coinness News Section -->
                <div class="col-lg-12 mb-4">
                    <div class="card shadow-sm p-4">
                        <div class="d-flex align-items-center mb-3">
                            <a href="https://www.coinness.com" target="_blank">
                                <img src="{% static 'coinness.png' %}" alt="Coinness Icon" class="me-2" style="height: 30px;">
                            </a>
                            <h5 class="mb-0">Coinness Live Feed <span class="text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="The Coinness Korean version tends to be updated more frequently"><i class="fas fa-info-circle"></i></span></h5>

                            <!-- Dropdown to switch between KR and ENG versions -->
                            <div class="ms-auto">
                                <select id="feed-selector" class="form-select form-select-sm">
                                    <option value="eng" selected>🇺🇸English Version</option>
                                    <option value="kr">🇰🇷Korean Version</option>
                                </select>
                            </div>
                        </div>

                        <!-- Table to display news -->
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>News</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody class="news-table">
                                    <!-- Loading Indicator -->
                                    <tr class="loading-indicator text-center">
                                        <td colspan="2">Fetching latest news... please wait!</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Sentiment Analysis Section -->
                <div class="col-lg-12 sentiment-section">
                    <div class="card shadow-sm p-4">
                        <h5 class="mb-3">Deep Learning Language Model Bitcoin Sentiment Score</h5>
                        <p class="small text-muted">
                            These results are based on the analysis of recent Coinness news articles
                            (Korean version, which is updated more frequently than the English version)
                            and how they are classified as favorable, unfavorable, or neutral for
                            Bitcoin prices using the CryptoDeBERTa language model. The scores are
                            calculated based on a sentiment classification model developed by the
                            AIPHABTC AI research team.
                        </p>
                        <div class="d-flex justify-content-end">
                            <a href="https://huggingface.co/LDKSolutions/KR-cryptodeberta-v2-base" class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center" style="width: auto;" target="_blank" class="d-inline-flex align-items-center text-decoration-none">
                                <img src="{% static 'huggingface.png' %}" alt="settings" class="me-2" style="height: 30px;">
                                AIPHABTC Transformer Encoders
                            </a>
                        </div>

                        <!-- Sentiment Scores -->
                        <div class="sentiment-scores">
                            {% for score in avg_sentiment_scores_percentage %}
                                <div class="sentiment-score d-flex align-items-center mb-2">
                                    <span class="me-2" style="width: 120px;">{{ sentiment_labels|get_item:forloop.counter0 }}:</span>
                                    <div class="progress flex-grow-1">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: {{ score }}%;" aria-valuenow="{{ score }}" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <span class="ms-2 text-muted">{{ score|floatformat:2 }}%</span>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

            </p>


            <hr style="height: 5px; background-color: green;">
        </div>
    </div>
</div>
<div class="footer">
    <p><strong>Company Name:</strong> AIPHABTC Co., Ltd. | <strong>Business Registration Number:</strong> 385-87-03253 | <strong>Address:</strong> 3rd Floor, Room 327, Donggu Building, 15 Teheran-ro 86-gil, Gangnam-gu, Seoul, South Korea (Daechi-dong) </p>
    <p> AIPHABTC provides a platform for sharing insights and information on artificial intelligence and cryptocurrency. Please note that any indicators or automated systems offered on the platform are for informational purposes only and do not constitute investment advice. </p>
</div>
{% endblock %}


{% block javascript %}
{{ block.super }}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    // Initialize tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });

    // Handle Heatmap Dropdown Selection
    const heatmapOptions = document.querySelectorAll('.heatmap-option');

    heatmapOptions.forEach(function (option) {
        option.addEventListener('click', function (e) {
            e.preventDefault();
            const selectedHeatmap = this.getAttribute('data-heatmap');

            // Hide both heatmaps initially
            document.getElementById('crypto-heatmap').style.display = 'none';
            document.getElementById('stocks-heatmap').style.display = 'none';
            document.getElementById('etf-heatmap').style.display = 'none';

            // Show the selected heatmap
            if (selectedHeatmap === 'crypto') {
                document.getElementById('crypto-heatmap').style.display = 'block';
            } else if (selectedHeatmap === 'stocks') {
                document.getElementById('stocks-heatmap').style.display = 'block';
            } else if (selectedHeatmap === 'etf') {
                document.getElementById('etf-heatmap').style.display = 'block';
            }
        });
    });

    //////////////////////// News PART ///////////////////////////
    const feedSelector = document.getElementById('feed-selector');
    let newsData = {
        eng: [],
        kr: []
    };

    // Function to update the news table based on the selected feed
    function updateNewsTable(feed) {
        const newsContainer = document.querySelector('.news-table');
        newsContainer.innerHTML = ''; // Clear existing news
        newsData[feed].forEach(item => {
            const newsRow = `
                <tr>
                    <td class="news-title title-cell" data-tooltip="${item.contents}">
                        <strong>${item.titles}</strong>
                        <div class="tooltip-custom">${item.contents}</div>
                    </td>
                    <td class="text-muted">
                        <small>${new Date(item.datetimes).toLocaleString()}</small>
                    </td>
                </tr>`;
            newsContainer.insertAdjacentHTML('beforeend', newsRow);
        });
    }

    // Function to fetch Korean news and sentiment score
    function fetchNewsAndSentiment() {
        console.log("Fetching Korean News and Sentiment");
        return fetch('{% url "aiphabtc:get_news_and_sentiment" %}')
            .then(response => response.json())
            .then(data => {
                newsData.kr = data.scraped_data;
                // Update sentiment scores (will always be visible)
                const sentimentScoresContainer = document.querySelector('.sentiment-scores');
                sentimentScoresContainer.innerHTML = '';
                data.avg_sentiment_scores_percentage.forEach((score, index) => {
                    const sentimentScoreDiv = `
                        <div class="sentiment-score d-flex align-items-center mb-2">
                            <span class="me-2" style="width: 120px;">${data.sentiment_labels[index]}:</span>
                            <div class="progress flex-grow-1">
                                <div class="progress-bar bg-success" role="progressbar" style="width: ${score}%;"></div>
                            </div>
                            <span class="ms-2 text-muted">${score}%</span>
                        </div>`;
                    sentimentScoresContainer.insertAdjacentHTML('beforeend', sentimentScoreDiv);
                });
            })
            .catch(error => console.error('Error fetching Korean news and sentiment:', error));
    }

    // Function to fetch English news only
    function fetchNewsEng() {
        console.log("Fetching English News");
        return fetch('{% url "aiphabtc:get_news_eng" %}')
            .then(response => response.json())
            .then(data => {
                newsData.eng = data.scraped_data_eng;
            })
            .catch(error => console.error('Error fetching English news:', error));
    }

    // Fetch both Korean and English news on page load
    Promise.all([fetchNewsAndSentiment(), fetchNewsEng()])
        .then(() => {
            updateNewsTable('eng'); // Show English news by default
        });

    // Event listener for feed selection dropdown
    feedSelector.addEventListener('change', function () {
        const selectedFeed = this.value;
        updateNewsTable(selectedFeed); // Update table based on selected feed
    });

    //////////////////////// News PART END ////////////////////////





    // Show BTC Dominance by default
    document.getElementById('btc-dominance').style.display = 'block';

    // Handle Dominance dropdown selection
    const dominanceOptions = document.querySelectorAll('.dominance-option');
    dominanceOptions.forEach(function (option) {
        option.addEventListener('click', function (e) {
            e.preventDefault();
            const chartToShow = this.getAttribute('data-chart');

            // Hide all dominance charts
            document.querySelectorAll('#btc-dominance, #eth-dominance, #total3-dominance, #total2-dominance, #gold, #silver, #NAS100, #IWM, #USDX, #sp500, #BTCLongs, #BTCShorts, #BTC_MVRV').forEach(function (chart) {
                chart.style.display = 'none';
            });

            // Show the selected dominance chart
            document.getElementById(chartToShow).style.display = 'block';
        });
    });

    // Show BTC-KRW by default
    document.getElementById('btc-usdt').style.display = 'block';

    // Handle Market Charts dropdown selection
    const chartOptions = document.querySelectorAll('.chart-option');
    chartOptions.forEach(function (option) {
        option.addEventListener('click', function (e) {
            e.preventDefault();
            const chartToShow = this.getAttribute('data-chart');

            // Hide all market charts
            document.querySelectorAll('#btc-krw, #btc-usdt, #eth-krw, #eth-usdt, #sol-krw, #sol-usdt, #usdt-krw').forEach(function (chart) {
                chart.style.display = 'none';
            });

            // Show the selected market chart
            document.getElementById(chartToShow).style.display = 'block';
        });
    });
});
</script>
{% endblock %}